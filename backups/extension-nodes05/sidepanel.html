
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Content Extractor</title>
    <!-- Link the sidepanel logic -->
    <script src="sidepanel.js" type="module"></script>
  <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .my-button {
            padding: 10px 15px;
            margin: 5px;
            cursor: pointer;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #e0e0e0;
        }
        .my-button:hover {
            background-color: #d0d0d0;
        }
        .my-button:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }
        .my-textarea {
            width: 98%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .my-output {
            background-color: #fff;
        }
        .my-status {
            font-family: monospace;
            background-color: #e9e9e9;
            padding: 5px;
            border-radius: 3px;
        }
        .my-footer {
            margin-top: 20px;
            padding-top: 10px;
            border-top: 1px solid #ccc;
            font-size: 0.8em;
            text-align: center;
        }
        .myD3Button {
            padding: 8px 12px;
            margin: 5px;
            cursor: pointer;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #f0f0f0;
        }
        .myD3Button:hover {
            background-color: #e8e8e8;
        }
        .node circle {
            cursor: pointer;
        }
        .link {
            fill: none;
            stroke: #ccc;
            stroke-width: 1.5px;
        }
        .arbitrary-link {
            fill: none;
            stroke: #5d5d5d;
            stroke-width: 2.5px;
        }
        .line-text {
            fill: #555;
            font-family: sans-serif;
            font-size: 10px;
        }
        .my-movable-dialog {
            position: fixed;
            z-index: 999;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 10px;
            border-radius: 5px;
            bottom: 20px; /* Position from the bottom */
            right: 20px; /* Position from the right */
            transform: translateX(-50%);
            display: none;
        }
        .my-movable-dialog-header {
            cursor: grab;
            padding: 5px;
            background-color: #ddd;
            text-align: center;
            border-radius: 3px;
            margin-bottom: 10px;
        }

            .my-movable-dialog2 {
            position: fixed;
            z-index: 999;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 10px;
            border-radius: 5px;
            bottom: 20px; /* Position from the bottom */
            right: 20px; /* Position from the right */
           /* transform: translateX(-50%);  */
            display: none;   /* lets remove it from view  */
            resize: both; /* Allows the user to resize the dialog */
            overflow: auto; /* Adds scrollbars if content overflows */
        }
        .my-movable-dialog-header2 {
            cursor: grab;
            padding: 5px;
            background-color: #ddd;
            text-align: center;
            border-radius: 3px;
            margin-bottom: 10px;
        }

        
        .my-movable-dialog input, .my-movable-dialog button {
            display: block;
            width: 100%;
            margin-bottom: 5px;
        }
        .my-movable-dialog textarea {
            width: calc(100% - 20px);
            resize: both;
            overflow: auto; /* Adds scrollbars if content overflows */
        }
        .node.selected circle {
            fill: crimson !important;
        }
        #mySvgContainer {
            width: 100%;
            height: 600px;
            border: 1px solid #ccc; /* optional, for visibility */
        }
        
    </style>

</head>
<body style="margin: 0; padding: 16px; min-height: 100vh; display: flex; flex-direction: column;">
    <div class="container" style="flex-grow: 1; display: flex; flex-direction: column; gap: 16px;">
        <h1 style="font-size: 1.25rem;">Page Content Extractor & Summarizer</h1>

        <!-- Control Buttons -->
        <div class="button-group" style="display: flex; gap: 8px;">
            <button id="showAllBtn" style="flex: 1; padding: 8px; cursor: pointer;">
                Summarize All Text
            </button>
            <button id="showSelectedBtn" style="flex: 1; padding: 8px; cursor: pointer;">
                Summarize Selection
            </button>
        </div>

        <!-- Message/Status Area -->
        <div id="statusMessage" style="font-size: 0.875rem; color: #4b5563;">Click a button to summarize content.</div>

        <!-- Content Display Area -->
        <textarea id="contentArea" readonly placeholder="Summary will appear here..." style="flex-grow: 1; width: 100%; padding: 12px; resize: none; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;"></textarea>

    </div>

 <h1>Client-side-Chrome GeminiNano API</h1>
    <p>For desktop/laptop only. Needs 4GB download and 22GB free space.</p>
    <button id="myLoadButton" onclick="myLoadModel()" class="my-button my-load-button">Load Model</button>
    <button id="myStreamButton" onclick="myToggleStream()" class="my-button my-stream-button">Generate Graph</button>
    <button id="mySaveButton" onclick="mySaveJSONFile()" class="my-button my-save-button" disabled>Save Output JSON</button>
    <br><br>
    <textarea id="myInputPrompt" class="my-textarea" rows="6" cols="120" placeholder="Type your prompt here...">Generate a single JSON object about animals. The object must contain two top-level keys: "nodes" and "links". The "nodes" value must be an array of objects, each with "id" (a unique ordered number), "parentId" (a string corresponding to its parent's id, or an empty string for the root node which in this case will have the name "animals"), "name" (a descriptive string), and "fact" (a string containing a brief interesting fact about the node). The "links" value must be an empty array []. Do not include any text outside of the JSON object.</textarea>
    <br>
    <div id="myDiv01" class="my-status">...</div><br>
    <textarea id="myOutput" class="my-textarea my-output" rows="10" cols="120" readonly></textarea>
    <hr>
    <h1>D3.js Hierarchical Data Demo</h1>
    <input type="file" id="myFileLoad" style="display: none;" onchange="myLoadFile(event)">
    <button class="myD3Button" id="myLoadD3Button" onclick="document.getElementById('myFileLoad').click()">Load from JSON</button>
    <button class="myD3Button" id="mySaveD3Button" onclick="mySaveData()">Save Graph JSON</button>
    <button class="myD3Button" id="myAddD3Button" onclick="myShowAddNodeDialog('')">Add Node</button>
        <button class="myD3Button" onclick="myEditNode()">Edit Node</button>
    <button class="myD3Button" id="myAddLineD3Button" onclick="myShowAddLineDialog()">Add Line</button>
    <button class="myD3Button" id="myDeleteD3Button" onclick="myDeleteSelectedNodes()">Delete Node</button>
    <button class="myD3Button" id="myFitScreenD3Button" onclick="myFitToScreen()">Fit to Screen</button>
  <!--  <button class="myD3Button" id="myUpdateButton" onclick="myRefreshGraph()">update</button>   -->
   <!-- <button class="myD3Button" id="myTidyUpD3Button" onclick="myTidyUpGraph(document.getElementById('myLayoutSelector').value)">Tidy Up</button>  -->
    <select id="myLayoutSelector" onchange="myChangeLayout()">
        <option value="tree">Tree Layout</option>
        <option value="cluster">Cluster Layout</option>    
        <option value="personal">Personal Layout</option>       
   <!--     <option value="force">Force-Directed Graph</option>  -->  
        <option value="radial">Radial</option>    
    </select>
    <svg id="mySvgContainer"></svg>
    <div id="myShowDiv"> ... </div>
    <div id="myFactDialog" class="my-movable-dialog2" ">
        <div class="my-movable-dialog-header2">
            Node Fact
        </div>
        <textarea id="myFactDisplayArea" rows=4 cols=80 readonly placeholder="Mouseover a node to see its fact."></textarea>
    </div>
    <div id="myAddNodeDialog" class="my-movable-dialog">
        <div class="my-movable-dialog-header">
            <h3>Add New Node</h3>
        </div>
        <input type="text" id="myNewNodeName" placeholder="Node Name" title="title for the node">
        <input type="text" id="myNewNodeParentId" readonly placeholder="Parent ID"  title="The selected node ID number" >
        <input type="text" id="myNewNodeFact" placeholder="Fact (optional)"  title="Fact with the title" >
        <button class="myD3Button" onclick="myAddGenerateNode()"  title="LLM Generate Title and or fact" >Generate</button>
        <input type="number" id="myGenerateLoopNumber" value="1"  title="How many titles and facts to generatte" > 
        <button class="myD3Button" onclick="myAddNewNode()"  title="Manually Add the Information" >Add</button>
        <button class="myD3Button" onclick="document.getElementById('myAddNodeDialog').style.display = 'none'"  >Cancel</button>
    </div>
    <div id="myAddLineDialog" class="my-movable-dialog">
        <div class="my-movable-dialog-header">
            <h3>Add New Line</h3>
        </div>
        Select two nodes on the graph first.
        <input type="text" id="myJoiningFact" placeholder="Joining Fact (optional)">
        <button class="myD3Button" onclick="myAddLineWithFact()">Add</button>
        <button class="myD3Button" onclick="document.getElementById('myAddLineDialog').style.display = 'none'">Cancel</button>
    </div>
    <div id="myEditNodeDialog" class="my-movable-dialog" style="display: none;">
    <h3>Edit Node</h3>
    <label for="myEditNodeName">Node Name:</label>
    <input type="text" id="myEditNodeName" required>
    
    <label for="myEditNodeFact">Fact:</label>
    <textarea id="myEditNodeFact"></textarea>
    
    <button class="myD3Button" onclick="mySaveEditedNode()">Save</button>
    <button class="myD3Button" onclick="document.getElementById('myEditNodeDialog').style.display = 'none'; myUnselectAllNodes();">Cancel</button>
</div>
    <br><br>
    <footer class="my-footer">
        Use at your own risk.<br>
        By Jeremy Ellis <a href="https://www.linkedin.com/in/jeremy-ellis-4237a9bb/">LinkedIn</a>
    </footer>
    <script src="./d3js.min.js"></script>
</body>
</html>
